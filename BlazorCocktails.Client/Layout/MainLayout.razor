@inherits LayoutComponentBase
@using MudBlazor
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<App> L

<MudThemeProvider IsDarkMode="@_isDark" />

<MudLayout Class="@(_isDark ? "summer-dark" : "summer-light")">

    <MudAppBar Elevation="2" Color="Color.Primary" Class="appbar-2rows">
        <MudIconButton Icon="@Icons.Material.Filled.Menu"
                       Color="Color.Inherit"
                       Edge="Edge.Start"
                       OnClick="ToggleDrawer" />

        <MudText Typo="Typo.h6" Class="ml-2">BlazorCocktails</MudText>

        <MudSpacer />

        <div class="appbar-actions-col">
            <div class="appbar-row top">
                <MudButton Href="/login"
                           Variant="Variant.Outlined"
                           Color="Color.Inherit"
                           StartIcon="@Icons.Material.Filled.Login"
                           Size="Size.Small"
                           Class="appbar-btn">
                    LOGIN
                </MudButton>

                <MudButton Href="/register"
                           Variant="Variant.Outlined"
                           Color="Color.Inherit"
                           StartIcon="@Icons.Material.Filled.PersonAdd"
                           Size="Size.Small"
                           Class="appbar-btn">
                    REGISTRO
                </MudButton>
            </div>

            <div class="appbar-row bottom">
                <LanguageSwitcher />
                <MudIconButton Icon="@(_isDark? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)"
                               Title="@L["Theme_Toggle"]"
                               Color="Color.Inherit"
                               Size="Size.Small" />
            </div>
        </div>
    </MudAppBar>



    <MudDrawer @bind-Open="_drawerOpen"
               Variant="DrawerVariant.Responsive"
               Elevation="1"
               Class="p-0 drawer-fix">
        <MudDrawerHeader Class="px-4 py-3">
            <MudText Typo="Typo.subtitle1">@L["Nav_Menu"]</MudText>
        </MudDrawerHeader>

        <div class="drawer-scroll">
            <NavMenu />
        </div>
    </MudDrawer>

    <MudMainContent>
        <div class="p-4">
            @Body
        </div>
    </MudMainContent>
</MudLayout>

@code {
    private bool _drawerOpen = true;
    private bool _isDark = true; // modo noche por defecto

    private void ToggleDrawer() => _drawerOpen = !_drawerOpen;
    private void ToggleDarkMode() => _isDark = !_isDark;
}
